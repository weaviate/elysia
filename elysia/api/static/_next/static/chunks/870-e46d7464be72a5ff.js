"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[870],{60324:function(e,t,r){r.d(t,{q:function(){return o}});var n=r(65023);async function o(e,t,r){performance.now();try{if(!e)return{error:"No user id"};let o=await fetch("".concat(n.ho,"/feedback/remove"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e,conversation_id:t,query_id:r})});if(!o.ok)return console.error("Delete Feedback error! status: ".concat(o.status," ").concat(o.statusText)),{error:"Failed to delete feedback"};return await o.json()}catch(e){return console.error("Delete Feedback error:",e),{error:"Failed to delete feedback"}}finally{}}},8148:function(e,t,r){r.d(t,{W:function(){return u},CollectionProvider:function(){return d}});var n=r(57437),o=r(2265),a=r(65023);async function i(e){performance.now();try{if(!e)return[];let t=await fetch("".concat(a.ho,"/collections/").concat(e,"/list"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok)return console.error("Get Collections error! status: ".concat(t.status," ").concat(t.statusText)),[];return(await t.json()).collections}catch(e){return console.error("Get Collections error:",e),[]}finally{}}var s=r(94078);async function c(e,t){performance.now();try{let r=await fetch("".concat(a.ho,"/collections/").concat(e,"/metadata/").concat(t),{method:"DELETE"});if(!r.ok)return console.error("Deleting collection metadata error! status: ".concat(r.status," ").concat(r.statusText)),{error:r.statusText};return{error:""}}catch(e){return console.error(e instanceof Error?e.message:String(e)),{error:"Error deleting collection metadata"}}finally{}}var l=r(38195);let u=(0,o.createContext)({collections:[],fetchCollections:()=>{},loadingCollections:!1,deleteCollection:()=>{},getRandomPrompts:()=>[]}),d=e=>{let{children:t}=e,{id:r,fetchCollectionFlag:a,initialized:d}=(0,o.useContext)(s.B),{showErrorToast:f,showSuccessToast:g}=(0,o.useContext)(l.u),[m,p]=(0,o.useState)([]),[h,v]=(0,o.useState)(!1),y=(0,o.useRef)(r),x=(0,o.useRef)(!1);(0,o.useEffect)(()=>{!x.current&&r&&d&&(x.current=!0,y.current=r,w())},[r,d]),(0,o.useEffect)(()=>{w()},[a]);let w=async()=>{if(!y.current)return;p([]),v(!0);let e=await i(y.current);p(e),v(!1),g("".concat(e.length," Collections Loaded"))},b=async e=>{if(!y.current)return;let t=await c(y.current,e);t.error?f("Failed to Remove Analysis",t.error):(g("Analysis Removed",'Analysis for "'.concat(e,'" has been removed successfully.')),w())};return(0,n.jsx)(u.Provider,{value:{collections:m,fetchCollections:w,loadingCollections:h,deleteCollection:b,getRandomPrompts:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;return m.reduce((e,t)=>e.concat(t.prompts||[]),[]).sort(()=>.5-Math.random()).slice(0,e)}},children:t})}},55903:function(e,t,r){r.d(t,{L:function(){return x},ConversationProvider:function(){return w}});var n=r(57437),o=r(2265),a=r(93837);let i={id:(0,a.Z)(),name:"New Conversation",error:!1,tree_updates:[],timestamp:new Date,enabled_collections:{},tree:[],base_tree:null,current:"",queries:{},initialized:!1};var s=r(8148),c=r(94078),l=r(65023);async function u(e){performance.now();try{let t=await fetch("".concat(l.ho,"/db/").concat(e,"/saved_trees"),{method:"GET"});if(!t.ok)return console.error("Error fetching saved trees! status: ".concat(t.status," ").concat(t.statusText)),{trees:{},error:"Error fetching saved conversations"};return await t.json()}catch(e){return console.error(e instanceof Error?e.message:String(e)),{trees:{},error:"Error fetching saved conversations"}}finally{}}async function d(e,t){performance.now();try{let r=await fetch("".concat(l.ho,"/db/").concat(e,"/load_tree/").concat(t),{method:"GET"});if(!r.ok)return console.error("Error fetching saved conversation ".concat(t,"! status: ").concat(r.status," ").concat(r.statusText)),{rebuild:[],error:"Error fetching saved conversation ".concat(t)};return await r.json()}catch(e){return console.error(e instanceof Error?e.message:String(e)),{rebuild:[],error:"Error fetching saved conversation ".concat(t)}}finally{}}async function f(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];performance.now();try{let n=await fetch("".concat(l.ho,"/init/tree/").concat(e,"/").concat(t),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({low_memory:r})});if(!n.ok)return console.error("Initializing tree failed! status: ".concat(n.status,", error: ").concat(n.statusText)),{conversation_id:t,error:"Failed to initialize tree",tree:null};let o=await n.json();if(null==o.tree)return{conversation_id:t,error:"Failed to initialize tree",tree:null};let a=e=>{e.choosen=!1,e.blocked=!1,e.options&&Object.values(e.options).forEach(e=>{a(e)})};return a(o.tree),o.tree.choosen=!0,o}catch(e){return console.error(e instanceof Error?e.message:String(e)),{conversation_id:t,error:"Failed to initialize tree",tree:null}}finally{}}async function g(e,t,r){performance.now();try{let n=await fetch("".concat(l.ho,"/util/follow_up_suggestions"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e,conversation_id:t,auth_key:r})});if(!n.ok)return console.error("Error fetching follow_up_suggestions! status: ".concat(n.status," ").concat(n.statusText)),{suggestions:[],error:"Error fetching follow_up_suggestions! status: ".concat(n.status," ").concat(n.statusText)};return await n.json()}catch(e){return console.error(e instanceof Error?e.message:String(e)),{suggestions:[],error:"Error fetching follow_up_suggestions!}"}}finally{}}async function m(e,t){performance.now();try{let r=await fetch("".concat(l.ho,"/db/").concat(e,"/delete_tree/").concat(t),{method:"DELETE",body:JSON.stringify({})});if(!r.ok)return console.error("Error deleting conversation ".concat(t,"! status: ").concat(r.status," ").concat(r.statusText)),{error:"Error deleting conversation ".concat(t)};return await r.json()}catch(e){return console.error(e instanceof Error?e.message:String(e)),{error:"Error deleting conversation ".concat(t)}}finally{}}async function p(e,t,r,n){performance.now();try{if(!e)return{error:"No user id"};let o=await fetch("".concat(l.ho,"/feedback/add"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e,conversation_id:t,query_id:r,feedback:n})});if(!o.ok)return console.error("Add Feedback error! status: ".concat(o.status," ").concat(o.statusText)),{error:"Failed to add feedback"};return await o.json()}catch(e){return console.error("Add Feedback error:",e),{error:"Failed to add feedback"}}finally{}}var h=r(60324),v=r(19206),y=r(99376);let x=(0,o.createContext)({conversations:[],setConversations:()=>{},currentConversation:null,setCurrentConversation:()=>{},creatingNewConversation:!1,setCreatingNewConversation:()=>{},loadingConversations:!1,loadingConversation:!1,startNewConversation:()=>{},conversationPreviews:{},addConversation:()=>Promise.resolve(null),removeConversation:()=>{},selectConversation:()=>{},setConversationStatus:()=>{},setAllConversationStatuses:()=>{},addMessageToConversation:()=>{},initializeEnabledCollections:()=>{},handleConversationError:()=>{},toggleCollectionEnabled:()=>{},handleWebsocketMessage:()=>{},updateTree:()=>{},addTreeToConversation:()=>{},changeBaseToQuery:()=>{},addQueryToConversation:()=>{},finishQuery:()=>{},updateNERForQuery:()=>{},updateFeedbackForQuery:()=>{},triggerAllCollections:()=>{},handleAllConversationsError:()=>{},addSuggestionToConversation:()=>{},getAllEnabledCollections:()=>[],loadConversationsFromDB:()=>{}}),w=e=>{let{children:t}=e,{collections:r}=(0,o.useContext)(s.W),{id:l,enableRateLimitDialog:w,initialized:b,fetchConversationFlag:_}=(0,o.useContext)(c.B),{changePage:C,currentPage:S}=(0,o.useContext)(v._),N=(0,y.useSearchParams)(),k=(0,y.usePathname)(),T=(0,o.useRef)(!1),[j,E]=(0,o.useState)([]),[D,P]=(0,o.useState)({}),[z,O]=(0,o.useState)(null),[q,R]=(0,o.useState)(!1),[F,A]=(0,o.useState)(!1),[I,L]=(0,o.useState)(!1),M=async(e,t)=>""===e?null:await f(e,t),W=async()=>{if(!l)return;R(!0);let e=await u(l||""),t=!1;for(let[r,n]of Object.entries(e.trees))n&&n.title&&n.last_update_time&&(P(e=>({...e,[r]:n})),t=!0);R(!1),t||F||await en()},Z=async(e,t,n)=>{if(L(!0),j.find(t=>t.id===e))O(e);else{let o=await d(l||"",e);A(!0);let a=await M(l||"",e);if(null!=a&&null!=r&&null!=a.tree){let i=o.rebuild.filter(e=>e&&"user_prompt"===e.type),s={};for(let t of i){let r=X(e,t.payload.prompt,t.query_id,j);s[t.query_id]=r}let c={enabled_collections:r.reduce((e,t)=>({...e,[t.name]:!0}),{}),id:e,name:t,tree_updates:[],tree:a.tree?[...i.map(e=>({...a.tree,name:e.payload.prompt})),a.tree]:[],base_tree:a.tree||null,queries:s,current:"",initialized:!0,error:!1,timestamp:n};for(let t of(i.forEach(t=>{Q(e,t.payload.prompt)}),E(e=>[...e,c]),o.rebuild))er(t)}A(!1)}L(!1)},U=async e=>{if(!(null==e?void 0:e.trim())||F)return null;let t=(0,a.Z)();A(!0);let[n]=await Promise.all([M(e,t)]);if(null===n||null===r||null===n.tree)return A(!1),null;let o={...i,id:t,timestamp:new Date,tree:[n.tree],base_tree:n.tree,enabled_collections:r.reduce((e,t)=>({...e,[t.name]:!0}),{})};return E([...j||[],o]),O(t),A(!1),P(e=>({...e,[t]:{title:o.name,last_update_time:new Date().toISOString()}})),"chat"===S&&C("chat",{conversation:t},!0),o},G=(e,t)=>{E(r=>r.map(r=>r.id===t?{...r,current:e}:r))},V=async(e,t)=>{E(r=>r.map(r=>r.id===t?{...r,name:e}:r)),P(r=>({...r,[t]:{title:e,last_update_time:new Date().toISOString()}}))},J=async(e,t,r)=>{if(!r)return;let n=await g(r,e,"");Y([{type:"suggestion",id:(0,a.Z)(),conversation_id:e,query_id:t,user_id:r,payload:{error:"",suggestions:n.suggestions}}],e,t)},Y=(e,t,r)=>{E(n=>n.map(n=>n.id===t?n.queries[r]?{...n,initialized:!0,queries:{...n.queries,[r]:{...n.queries[r],messages:[...n.queries[r].messages,...e]}}}:(console.warn("Query ".concat(r," not found in conversation ").concat(t," ").concat(JSON.stringify(Object.keys(n.queries)))),n):n))},B=e=>{let t=e.payload,r=(e,n,o)=>{if(!e)return null;if(e.id!==o.node||e.blocked){if(!e.options||!(Object.keys(e.options).length>0))return e;{let o=Object.entries(e.options).reduce((e,o)=>{let[a,i]=o,s=r(i,n,t);return s&&(e[a]=s),e},{});return{...e,options:o,blocked:!0}}}{let t=Object.entries(e.options).reduce((e,t)=>{let[r,a]=t;return r===o.decision?e[r]={...a,choosen:!0,reasoning:o.reasoning,options:o.reset?n?{base:n}:{}:a.options||{}}:e[r]=a,e},{});return{...e,options:t,blocked:!0}}};E(n=>n.map(n=>{if(n.id===e.conversation_id){let e=r(n.tree[t.tree_index],n.base_tree,t),o=[...n.tree||[]];return e&&(o[t.tree_index]=e),{...n,tree:o,tree_updates:[...n.tree_updates,t]}}return n}))},Q=(e,t)=>{var r,n;let o=(null===(n=j.find(t=>t.id===e))||void 0===n?void 0:null===(r=n.tree)||void 0===r?void 0:r.length)||1;E(r=>r.map(r=>{if(r.id===e){let e=[...r.tree];return e[o-1]&&(e[o-1]={...e[o-1],name:t}),{...r,tree:e}}return r}))},X=function(e,t,r,n){var o,i;let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],c={type:"User",id:(0,a.Z)(),query_id:r,conversation_id:e,user_id:l||"",payload:{type:"text",metadata:{},code:{language:"",title:"",text:""},objects:[t]}};return{id:r,query:t,finished:!1,query_start:new Date,query_end:null,feedback:null,NER:null,index:(null===(i=n.find(t=>t.id===e))||void 0===i?void 0:null===(o=i.queries[r])||void 0===o?void 0:o.index)||0,messages:[c,...s]}},$=(e,t)=>{E(r=>r.map(r=>r.id===e&&r.queries[t]?{...r,queries:{...r.queries,[t]:{...r.queries[t],finished:!0,query_end:new Date}}}:r))},H=(e,t,r)=>{E(n=>n.map(n=>n.id===e&&n.queries[t]?{...n,queries:{...n.queries,[t]:{...n.queries[t],NER:r}}}:n))},K=async(e,t,r)=>{let n=j.find(t=>t.id===e);n&&!n.error&&(n.queries[t].feedback===r?(await (0,h.q)(l||"",e,t),E(r=>r.map(r=>r.id===e&&r.queries[t]?{...r,queries:{...r.queries,[t]:{...r.queries[t],feedback:null}}}:r))):(ee(l||"",e,t,r),E(n=>n.map(n=>n.id===e&&n.queries[t]?{...n,queries:{...n.queries,[t]:{...n.queries[t],feedback:r}}}:n))))},ee=async(e,t,r,n)=>await p(e,t,r,n),et=e=>{E(t=>t.map(t=>t.id===e?{...t,error:!0}:t))},er=e=>{if(e){if("status"===e.type)G(e.payload.text,e.conversation_id);else if("title"===e.type)V(e.payload.title,e.conversation_id);else if("ner"===e.type){let t=e.payload;H(e.conversation_id,e.query_id,t)}else"completed"===e.type?(G("",e.conversation_id),$(e.conversation_id,e.query_id),J(e.conversation_id,e.query_id,e.user_id)):"tree_update"===e.type?B(e):(["error","tree_timeout_error","rate_limit_error","authentication_error"].includes(e.type)&&(et(e.conversation_id),$(e.conversation_id,e.query_id),G("",e.conversation_id)),"rate_limit_error"===e.type&&w(),Y([e],e.conversation_id,e.query_id))}},en=async()=>{if(l){let e=await U(l);e&&O(e.id)}};return(0,o.useEffect)(()=>{r&&E(e=>e.map(e=>e.enabled_collections&&0!==Object.keys(e.enabled_collections).length?e:{...e,enabled_collections:r.reduce((e,t)=>({...e,[t.name]:!0}),{})}))},[r]),(0,o.useEffect)(()=>{l&&!T.current&&b&&(T.current=!0,W())},[l,b]),(0,o.useEffect)(()=>{W()},[_]),(0,o.useEffect)(()=>{let e=N.get("page");if("/"===k&&("chat"===e||null===e)&&T.current&&l&&Object.keys(D).length>0){let e=N.get("conversation");if(e){if(e===z)return;if(!D[e]){C("chat",{conversation:Object.entries(D).sort((e,t)=>{let[,r]=e,[,n]=t;return new Date(n.last_update_time).getTime()-new Date(r.last_update_time).getTime()})[0][0]},!0);return}let t=j.find(t=>t.id===e),r=D[e].title;t||Z(e,r,new Date(D[e].last_update_time)),O(e)}else{let e=Object.entries(D).sort((e,t)=>{let[,r]=e,[,n]=t;return new Date(n.last_update_time).getTime()-new Date(r.last_update_time).getTime()})[0][0];e!==z&&C("chat",{conversation:e},!0)}}},[N,k,D,l,z]),(0,n.jsx)(x.Provider,{value:{setConversations:E,setCurrentConversation:O,conversations:j,currentConversation:z,addConversation:U,removeConversation:e=>{z===e&&O(null),E([]),P({}),m(l||"",e),W()},selectConversation:e=>{C("chat",{conversation:e},!0)},setConversationStatus:G,setAllConversationStatuses:e=>{E(t=>t.map(t=>({...t,current:e})))},addMessageToConversation:Y,initializeEnabledCollections:(e,t)=>{E(r=>r.map(r=>r.id===t?{...r,enabled_collections:e}:r))},toggleCollectionEnabled:(e,t)=>{E(r=>r.map(r=>{if(r.id===t){let t={...r.enabled_collections,[e]:!r.enabled_collections[e]};return{...r,enabled_collections:t}}return r}))},updateTree:B,addTreeToConversation:e=>{E(t=>t.map(t=>t.id===e&&t.base_tree?{...t,tree:[...t.tree,{...t.base_tree}]}:t))},startNewConversation:en,changeBaseToQuery:Q,addQueryToConversation:(e,t,r)=>{E(n=>n.map(o=>{let a=X(e,t,r,n);return o.id===e?{...o,queries:{...o.queries,[r]:a}}:o}))},creatingNewConversation:F,conversationPreviews:D,loadingConversations:q,setCreatingNewConversation:A,finishQuery:$,updateNERForQuery:H,updateFeedbackForQuery:K,triggerAllCollections:(e,t)=>{E(r=>r.map(r=>{if(r.id===e){let e=Object.keys(r.enabled_collections).reduce((e,r)=>(e[r]=t,e),{});return{...r,enabled_collections:e}}return r}))},handleConversationError:et,handleAllConversationsError:()=>{E(e=>e.map(e=>({...e,error:!0})))},addSuggestionToConversation:J,getAllEnabledCollections:()=>j.reduce((e,t)=>[...e,...Object.entries(t.enabled_collections||{}).filter(e=>{let[t,r]=e;return!0===r}).map(e=>{let[t,r]=e;return t})],[]),loadConversationsFromDB:W,handleWebsocketMessage:er,loadingConversation:I},children:t})}},87374:function(e,t,r){r.d(t,{EvaluationProvider:function(){return c},F:function(){return s}});var n=r(57437),o=r(2265),a=r(99376),i=r(19206);let s=(0,o.createContext)({evalPage:null,changeEvalPage:()=>{},showFeedbackNotification:!0,disableFeedbackNotification:()=>{}}),c=e=>{let{children:t}=e,{changePage:r}=(0,o.useContext)(i._),c=(0,a.useSearchParams)(),l=(0,a.usePathname)(),[u,d]=(0,o.useState)(null),[f,g]=(0,o.useState)(!0);return(0,o.useEffect)(()=>{"/eval"===l?d(null):"/eval/feedback"===l&&d("feedback")},[c,l]),(0,n.jsx)(s.Provider,{value:{evalPage:u,changeEvalPage:e=>{null===e?r("eval",{},!0):r("eval",{page:e},!0)},showFeedbackNotification:f,disableFeedbackNotification:()=>{g(!1)}},children:t})}},41445:function(e,t,r){r.d(t,{ProcessingProvider:function(){return l},i:function(){return c}});var n=r(57437),o=r(65023),a=r(2265),i=r(8148),s=r(38195);let c=(0,a.createContext)({triggerAnalysis:()=>{}}),l=e=>{let{children:t}=e,{fetchCollections:r}=(0,a.useContext)(i.W),{showErrorToast:l,finishProcessingSocket:u,updateProcessingSocket:d,analyzeCollection:f}=(0,a.useContext)(s.u),[g,m]=(0,a.useState)(),[p,h]=(0,a.useState)(!1),v=(0,a.useRef)(!1);return(0,a.useEffect)(()=>{h(!0)},[]),(0,a.useEffect)(()=>{if(v.current)return;v.current=!0;let e=new WebSocket((0,o.Zq)()+"process_collection");m(e),e.onopen=()=>{},e.onerror=e=>{m(void 0)},e.onclose=()=>{m(void 0)},e.onmessage=e=>{let t=JSON.parse(e.data);if(!t.type||"heartbeat"!==t.type){if(!t.type||!t.collection_name){console.warn("Received invalid message from processing socket: "+e.data),"error"===t.type&&(l("Error analyzing "+t.collection_name+"...",t.error||"Unknown error"),u(t.collection_name,t.error||""));return}t.error?u(t.collection_name,t.error||""):"update"===t.type?d(t.collection_name,t.progress,t.message):("completed"===t.type?u(t.collection_name,""):u(t.collection_name,t.error||""),r())}}},[p]),(0,a.useEffect)(()=>{if(!v.current)return;let e=setInterval(()=>{(null==g?void 0:g.readyState)!==WebSocket.CLOSED&&g||(v.current=!1,console.log("Processing Socket not online, reconnecting..."),h(e=>!e))},5e3);return()=>clearInterval(e)},[g]),(0,n.jsx)(c.Provider,{value:{triggerAnalysis:(e,t)=>{g?f(e,t,g):l("Error analyzing "+e.name+"...","Connection to Elysia lost (Socket: "+g+") (ID: "+t+")")}},children:t})}},19206:function(e,t,r){r.d(t,{RouterProvider:function(){return c},_:function(){return s}});var n=r(57437),o=r(2265),a=r(99376),i=r(38195);let s=(0,o.createContext)({currentPage:"chat",changePage:()=>{}}),c=e=>{let{children:t}=e,[r,c]=(0,o.useState)("chat"),{showConfirmModal:l}=(0,o.useContext)(i.u),u=(0,a.useSearchParams)(),d=function(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(n)t={page:e,...r};else{let n={};u.forEach((e,t)=>{n[t]=e}),t={...n,page:e,...r}}let o="/?".concat(new URLSearchParams(t).toString());n?window.history.replaceState(null,"",o):window.history.pushState(null,"",o)};return(0,o.useEffect)(()=>{let e=u.get("page");if(!e){let e={};u.forEach((t,r)=>{e[r]=t});let t="/?".concat(new URLSearchParams({page:"chat",...e}).toString());window.history.replaceState(null,"",t),c("chat");return}let t=["chat","data","collection","settings","eval","feedback","elysia","display"].includes(e)?e:"chat";if(e!==t){let e={};u.forEach((t,r)=>{"page"!==r&&(e[r]=t)});let t="/?".concat(new URLSearchParams({page:"chat",...e}).toString());window.history.replaceState(null,"",t)}c(t)},[u]),(0,n.jsx)(s.Provider,{value:{currentPage:r,changePage:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(n){l("Unsaved Changes","You have unsaved changes. Are you sure you want to leave this page? You will lose your changes.",()=>d(e,t,r));return}d(e,t,r)}},children:t})}},94078:function(e,t,r){r.d(t,{B:function(){return v},SessionProvider:function(){return y}});var n=r(57437),o=r(2265),a=r(99376),i=r(65023);async function s(e){performance.now();try{let t=await fetch("".concat(i.ho,"/init/user/").concat(e),{method:"POST",headers:{"Content-Type":"application/json"}});if(!t.ok)return console.error("Initializing user failed! status: ".concat(t.status,", error: ").concat(t.statusText)),{error:"Failed to initialize user",user_exists:!1,config:null,frontend_config:null,correct_settings:{base_model:!1,base_provider:!1,complex_model:!1,complex_provider:!1,wcd_url:!1,wcd_api_key:!1}};return await t.json()}catch(e){return console.error(e instanceof Error?e.message:String(e)),{error:"Failed to initialize user",user_exists:!1,config:null,frontend_config:null,correct_settings:{base_model:!1,base_provider:!1,complex_model:!1,complex_provider:!1,wcd_url:!1,wcd_api_key:!1}}}finally{}}async function c(e,t,r){let n=!(arguments.length>3)||void 0===arguments[3]||arguments[3];performance.now();try{if(!e||!t)return{error:"No user id or backend config",config:null,frontend_config:null,warnings:[]};let o=await fetch("".concat(i.ho,"/user/config/").concat(e,"/").concat(t.id),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t.name,config:t,frontend_config:r,default:n})});if(!o.ok)return console.error("Saving Config error! status: ".concat(o.status," ").concat(o.statusText)),{error:"Saving Config error! status: ".concat(o.status," ").concat(o.statusText),config:null,frontend_config:null,warnings:[]};return await o.json()}catch(e){return console.error("Saving Config error:",e),{error:e,config:null,frontend_config:null,warnings:[]}}finally{}}async function l(e){performance.now();try{if(!e)return{error:"No user id",configs:[],warnings:[]};let t=await fetch("".concat(i.ho,"/user/config/").concat(e,"/list"),{method:"GET",headers:{"Content-Type":"application/json","Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache"}});if(!t.ok)return console.error("Get Config List error! status: ".concat(t.status," ").concat(t.statusText)),{error:"Get Config List error! status: ".concat(t.status," ").concat(t.statusText),configs:[],warnings:[]};return await t.json()}catch(e){return console.error("Get Config List error:",e),{error:e,configs:[],warnings:[]}}finally{}}async function u(e){performance.now();try{if(!e)return{error:"No user id",config:null,frontend_config:null,warnings:[]};let t=await fetch("".concat(i.ho,"/user/config/").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok)return console.error("Get Config error! status: ".concat(t.status," ").concat(t.statusText)),{error:"Get Config error! status: ".concat(t.status," ").concat(t.statusText),config:null,frontend_config:null,warnings:[]};return await t.json()}catch(e){return console.error("Get Config error:",e),{error:e,config:null,frontend_config:null,warnings:[]}}finally{}}async function d(e){performance.now();try{if(!e)return{error:"No user id",config:null,frontend_config:null,warnings:[]};let t=await fetch("".concat(i.ho,"/user/config/").concat(e,"/new"),{method:"POST",headers:{"Content-Type":"application/json"}});if(!t.ok)return console.error("Creating new Config error! status: ".concat(t.status," ").concat(t.statusText)),{error:"Creating new Config error! status: ".concat(t.status," ").concat(t.statusText),config:null,frontend_config:null,warnings:[]};let r=await t.json();return{error:"",config:r.config,frontend_config:r.frontend_config,warnings:r.warnings}}catch(e){return console.error("Creating new Config error:",e),{error:e,config:null,frontend_config:null,warnings:[]}}finally{}}async function f(e,t){performance.now();try{if(!e||!t)return{error:"No user id or config id",config:null,frontend_config:null,warnings:[]};let r=await fetch("".concat(i.ho,"/user/config/").concat(e,"/").concat(t,"/load"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!r.ok)return console.error("Loading Config error! status: ".concat(r.status," ").concat(r.statusText)),{error:"Loading Config error! status: ".concat(r.status," ").concat(r.statusText),config:null,frontend_config:null,warnings:[]};return await r.json()}catch(e){return console.error("Loading Config error:",e),{error:e,config:null,frontend_config:null,warnings:[]}}finally{}}async function g(e,t){performance.now();try{if(!e||!t)return{error:"No user id or config id"};let r=await fetch("".concat(i.ho,"/user/config/").concat(e,"/").concat(t),{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!r.ok)return console.error("Deleting Config error! status: ".concat(r.status," ").concat(r.statusText)),{error:"Deleting Config error! status: ".concat(r.status," ").concat(r.statusText)};return await r.json()}catch(e){return console.error("Deleting Config error:",e),{error:e}}finally{}}var m=r(38195),p=r(84764);let h="device_id",v=(0,o.createContext)({mode:"home",id:"",showRateLimitDialog:!1,enableRateLimitDialog:()=>{},userConfig:null,savingConfig:!1,fetchCurrentConfig:()=>{},configIDs:[],updateConfig:()=>{},handleCreateConfig:()=>{},getConfigIDs:()=>{},handleLoadConfig:()=>{},handleDeleteConfig:()=>{},loadingConfig:!1,loadingConfigs:!1,correctSettings:null,triggerFetchCollection:()=>{},fetchCollectionFlag:!1,initialized:!1,triggerFetchConversation:()=>{},fetchConversationFlag:!1,updateUnsavedChanges:()=>{},unsavedChanges:!1}),y=e=>{let{children:t}=e,{showErrorToast:r,showSuccessToast:i,showWarningToast:y}=(0,o.useContext)(m.u),[x,w]=(0,o.useState)("home"),b=(0,a.usePathname)(),[_,C]=(0,o.useState)(!1),S=function(){let[e,t]=(0,o.useState)(null);return(0,o.useEffect)(()=>{let e=localStorage.getItem(h);if(e){t(e);return}p.ZP.load().then(e=>e.get().then(e=>{localStorage.setItem(h,e.visitorId),t(e.visitorId)}))},[]),e}(),[N,k]=(0,o.useState)(null),[T,j]=(0,o.useState)([]),[E,D]=(0,o.useState)(null),[P,z]=(0,o.useState)(!1),[O,q]=(0,o.useState)(!1),[R,F]=(0,o.useState)(!1),A=(0,o.useRef)(!1),[I,L]=(0,o.useState)(!1),[M,W]=(0,o.useState)(!1),[Z,U]=(0,o.useState)(!1),G=()=>{L(e=>!e)},V=()=>{W(e=>!e)},J=async e=>{if(q(!0),j([]),!e)return;let t=await l(e);t.error&&r("Failed to Load Configuration List",t.error),j(t.configs.sort((e,t)=>new Date(t.last_update_time).getTime()-new Date(e.last_update_time).getTime())),q(!1)},Y=async()=>{if(z(!0),!S)return;let e=await u(S);if(e.error){console.error(e.error),r("Failed to Load Configuration",e.error);return}k({backend:e.config,frontend:e.frontend_config}),z(!1)};(0,o.useEffect)(()=>{!A.current&&S&&B()},[S]),(0,o.useEffect)(()=>{"/"===b?w("home"):b.startsWith("/data")||b.startsWith("/collection")?w("data-explorer"):b.startsWith("/eval")?w("evaluation"):b.startsWith("/about/data")?w("about-data"):b.startsWith("/about")?w("about"):b.startsWith("/settings")&&w("settings")},[b]);let B=async()=>{if(!S)return;let e=await s(S);if(z(!0),e.error){console.error(e.error),r("Failed to Initialize User",e.error);return}J(S),k({backend:e.config,frontend:e.frontend_config}),D(e.correct_settings),z(!1),i("User Initialized"),A.current=!0},Q=async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];z(!0),F(!0);let n=await c(S,e.backend,e.frontend,t);n.error?(console.error(n.error),r("Failed to Save Configuration",n.error)):n.warnings.length>0?n.warnings.forEach(e=>{y("Configuration Saved with Warning",e)}):i("Configuration Saved","Your configuration has been saved successfully."),k({backend:n.config,frontend:n.frontend_config}),J(S||""),z(!1),G(),V(),F(!1)},X=async(e,t)=>{if(!e||!t)return;z(!0);let n=await f(e,t);n.error?(console.error(n.error),r("Failed to Load Configuration",n.error)):i("Configuration Loaded","Configuration loaded successfully."),k({backend:n.config,frontend:n.frontend_config}),z(!1)},$=async e=>{if(!e)return;z(!0);let t=await d(e);if(t.error){console.error(t.error),r("Failed to Create Configuration",t.error),z(!1);return}if(i("Configuration Created","New configuration created successfully."),t.config){let e=t.config.name||"New Config",r=e,n=1;for(;T.some(e=>e.name===r);)r="".concat(e," ").concat(n),n++;r!==e&&(t.config.name=r)}k({backend:t.config,frontend:t.frontend_config}),J(e),z(!1)},H=async(e,t,n)=>{if(!e||!t)return;z(!0);let o=await g(e,t);if(o.error)console.error(o.error),r("Failed to Delete Configuration",o.error);else if(i("Configuration Deleted","Configuration deleted successfully."),n){let r=T.find(e=>e.config_id!==t);r?X(e,r.config_id):k(null)}J(e),z(!1),V(),G()};return(0,n.jsx)(v.Provider,{value:{mode:x,id:S,showRateLimitDialog:_,enableRateLimitDialog:()=>{C(!0)},userConfig:N,savingConfig:R,fetchCurrentConfig:Y,configIDs:T,updateConfig:Q,handleCreateConfig:$,getConfigIDs:J,handleLoadConfig:X,handleDeleteConfig:H,loadingConfig:P,loadingConfigs:O,correctSettings:E,fetchCollectionFlag:I,initialized:A.current,triggerFetchCollection:G,triggerFetchConversation:V,fetchConversationFlag:M,updateUnsavedChanges:e=>{U(e)},unsavedChanges:Z},children:t})}},10193:function(e,t,r){r.d(t,{J:function(){return c},SocketProvider:function(){return l}});var n=r(57437),o=r(2265),a=r(65023),i=r(55903),s=r(38195);let c=(0,o.createContext)({socketOnline:!1,sendQuery:async()=>!1}),l=e=>{let{children:t}=e,{setConversationStatus:r,setAllConversationStatuses:l,handleAllConversationsError:u,getAllEnabledCollections:d,handleWebsocketMessage:f}=(0,o.useContext)(i.L),{showErrorToast:g,showSuccessToast:m}=(0,o.useContext)(s.u),[p,h]=(0,o.useState)(!1),[v,y]=(0,o.useState)(),[x,w]=(0,o.useState)(!1),b=(0,o.useRef)(!1);(0,o.useEffect)(()=>{w(!0)},[]),(0,o.useEffect)(()=>{if(!b.current)return;let e=setInterval(()=>{p&&(null==v?void 0:v.readyState)!==WebSocket.CLOSED&&v||(console.log("Elysia not online, trying to reconnect..."),b.current=!1,w(e=>!e))},5e3);return()=>clearInterval(e)},[p,v]),(0,o.useEffect)(()=>{if(b.current)return;b.current=!0;let e=new WebSocket((0,a.Zq)()+"query");e.onopen=()=>{h(!0),m("Connected to Elysia")},e.onmessage=e=>{try{let t=JSON.parse(e.data);f(t)}catch(e){}},e.onerror=e=>{h(!1),y(void 0),l(""),u(),g("Connection to Elysia lost")},e.onclose=()=>{h(!1),l(""),y(void 0),u(),g("Connection to Elysia lost")},y(e)},[x]);let _=async function(e,t,n,o){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];r("Thinking...",n);let s=d();return null==v||v.send(JSON.stringify({user_id:e,query:t,query_id:o,conversation_id:n,collection_names:s,route:a,mimick:i})),Promise.resolve(!0)};return(0,n.jsx)(c.Provider,{value:{socketOnline:p,sendQuery:_},children:t})}},38195:function(e,t,r){r.d(t,{ToastProvider:function(){return f},u:function(){return d}});var n=r(57437),o=r(2265),a=r(65898),i=r(89534),s=r(22744),c=r(32768),l=r(62869);let u=e=>{let{errorText:t}=e,[r,a]=(0,o.useState)(!1),i=async e=>{e.stopPropagation();try{await navigator.clipboard.writeText(t),a(!0),setTimeout(()=>a(!1),2e3)}catch(e){console.error("Failed to copy error text:",e)}};return(0,n.jsx)("div",{className:"flex gap-2",children:(0,n.jsx)(l.z,{onClick:i,variant:"ghost",size:"sm",className:"h-8 shrink-0 px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",title:"Copy error to clipboard",children:r?(0,n.jsx)(c.vYr,{className:"h-4 w-4"}):(0,n.jsx)(s.Fqs,{className:"h-4 w-4"})})})},d=(0,o.createContext)({analyzeCollection:()=>{},currentToasts:[],showErrorToast:()=>{},showSuccessToast:()=>{},showWarningToast:()=>{},finishProcessingSocket:()=>{},updateProcessingSocket:()=>{},isConfirmModalOpen:!1,confirmModalTitle:"",confirmModalDescription:"",showConfirmModal:()=>{},handleConfirmModal:()=>{},handleCancelModal:()=>{}}),f=e=>{let{children:t}=e,{toast:r}=(0,a.pm)(),[s,c]=(0,o.useState)([]),l=(0,o.useRef)(),[f,g]=(0,o.useState)(!1),[m,p]=(0,o.useState)(""),[h,v]=(0,o.useState)(""),[y,x]=(0,o.useState)(null),w=e=>{let t=Math.floor((Date.now()-e)/1e3),r=Math.floor(t/60),n=t%60;return r>0?"".concat(r,"m ").concat(n,"s"):"".concat(n,"s")},b=(0,o.useCallback)((e,t)=>{let o=t||"An error occurred. Please try again.",a="".concat(e,": ").concat(o);r({title:e,description:o,variant:"destructive",action:(0,n.jsx)(u,{errorText:a})})},[r]),_=(0,o.useCallback)((e,t)=>{r({title:e,description:t,variant:"default"})},[r]),C=(0,o.useCallback)((e,t)=>{r({title:e,description:t||"Please review this warning.",variant:"warning",action:(0,n.jsx)(i.gD,{altText:"Dismiss",children:"Dismiss"})})},[r]),S=(0,o.useCallback)((e,t,r)=>{p(e),v(t),x(()=>r),g(!0)},[]),N=(0,o.useCallback)(()=>{y&&y(),g(!1),p(""),v(""),x(null)},[y]),k=(0,o.useCallback)(()=>{g(!1),p(""),v(""),x(null)},[]),T=(0,o.useCallback)((e,t,n)=>{if(s.some(t=>t.collection_name===e.name)){setTimeout(()=>{r({title:"Already analyzing "+e.name+"...",description:"Please wait for it to finish before analyzing again."})},0);return}setTimeout(()=>{let o=Date.now(),a=r({title:"0% - Starting analysis of "+e.name+"...",description:"Connecting to server... (0s)",progress:0,duration:1e6});c(r=>{let i=[...r,{collection_name:e.name,toast:a,progress:0,startTime:o,currentMessage:"Connecting to server..."}];if(!n||!t)return b("Error analyzing "+e.name+"...","Connection to Elysia lost (Socket: "+n+") (ID: "+t+")"),c(t=>t.filter(t=>t.collection_name!==e.name)),r;{let r={user_id:t,collection_name:e.name};n.send(JSON.stringify(r))}return i})},0)},[s,r]);return(0,o.useEffect)(()=>(s.length>0?l.current=setInterval(()=>{c(e=>{let t=!1,r=e.map(e=>{if(e.progress<100){let r=w(e.startTime);e.toast.update({id:e.toast.id,title:"".concat(Math.round(e.progress),"% - Analyzing ").concat(e.collection_name,"..."),description:"".concat(e.currentMessage," (").concat(r,")"),progress:e.progress}),t=!0}return e});return t?r:e})},1e3):l.current&&clearInterval(l.current),()=>{l.current&&clearInterval(l.current)}),[s.length]),(0,n.jsx)(d.Provider,{value:{analyzeCollection:T,currentToasts:s,showErrorToast:b,showSuccessToast:_,showWarningToast:C,finishProcessingSocket:(e,t)=>{c(r=>{let o=r.find(t=>t.collection_name===e);if(!o)return r;let a=w(o.startTime);if(t){let e="".concat(t," (Total time: ").concat(a,")"),r="Error analyzing ".concat(o.collection_name,": ").concat(e);o.toast.update({id:o.toast.id,title:"100% - Error analyzing ".concat(o.collection_name,"..."),variant:"destructive",description:e,progress:100,action:(0,n.jsx)(u,{errorText:r})})}else o.toast.update({id:o.toast.id,title:"100% - Done!",description:"Collection analyzed successfully (Total time: ".concat(a,")"),progress:100,action:(0,n.jsx)(i.gD,{altText:"Close",onClick:()=>o.toast.dismiss(),children:"Close"})});return r.filter(t=>t.collection_name!==e)})},updateProcessingSocket:(e,t,r)=>{c(n=>{let o=n.find(t=>t.collection_name===e);if(!o)return n;let a=Number((100*t).toFixed(2)),i=w(o.startTime);return o.toast.update({id:o.toast.id,title:"".concat(Math.round(a),"% - Analyzing ").concat(o.collection_name,"..."),description:"".concat(r," (").concat(i,")"),progress:a}),n.map(t=>t.collection_name===e?{...t,progress:a,currentMessage:r}:t)})},isConfirmModalOpen:f,confirmModalTitle:m,confirmModalDescription:h,showConfirmModal:S,handleConfirmModal:N,handleCancelModal:k},children:t})}},65023:function(e,t,r){r.d(t,{Zq:function(){return a},h5:function(){return o},ho:function(){return n}});let n="",o="/static/",a=()=>{{let e="https:"===window.location.protocol?"wss:":"ws:",t=window.location.host;return"".concat(e,"//").concat(t,"/ws/")}}},62869:function(e,t,r){r.d(t,{d:function(){return c},z:function(){return l}});var n=r(57437),o=r(2265),a=r(37053),i=r(90535),s=r(94508);let c=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 active:scale-95 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-background_alt text-secondary hover:bg-foreground hover:text-primary",destructive:"bg-error/10 text-error hover:bg-error/20",accept:"bg-accent/10 text-accent hover:bg-accent/20",outline:"border border-input shadow-sm hover:bg-foreground_alt hover:text-primary",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-foreground_alt hover:text-primary border border-transparent",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-8 w-8"}},defaultVariants:{variant:"default",size:"default"}}),l=o.forwardRef((e,t)=>{let{className:r,variant:o,size:i,asChild:l=!1,...u}=e,d=l?a.g7:"button";return(0,n.jsx)(d,{className:(0,s.cn)(c({variant:o,size:i,className:r})),ref:t,...u})});l.displayName="Button"},19060:function(e,t,r){r.d(t,{X:function(){return c}});var n=r(57437),o=r(2265),a=r(45236),i=r(59559),s=r(94508);let c=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)(a.fC,{ref:t,className:(0,s.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-secondary focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-foreground_alt  data-[state=checked]:text-primary",r),...o,children:(0,n.jsx)(a.z$,{className:(0,s.cn)("flex items-center justify-center text-current"),children:(0,n.jsx)(i.Z,{className:"h-4 w-4"})})})});c.displayName=a.fC.displayName},26110:function(e,t,r){r.d(t,{$N:function(){return m},Be:function(){return p},Vq:function(){return c},cN:function(){return g},cZ:function(){return d},fK:function(){return f}});var n=r(57437),o=r(2265),a=r(49009),i=r(44986),s=r(94508);let c=a.fC;a.xz;let l=a.h_;a.x8;let u=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)(a.aV,{ref:t,className:(0,s.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...o})});u.displayName=a.aV.displayName;let d=o.forwardRef((e,t)=>{let{className:r,children:o,...c}=e;return(0,n.jsxs)(l,{children:[(0,n.jsx)(u,{}),(0,n.jsxs)(a.VY,{ref:t,className:(0,s.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-2xl translate-x-[-50%] translate-y-[-50%] gap-4 border border-foreground bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...c,children:[o,(0,n.jsxs)(a.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,n.jsx)(i.Z,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});d.displayName=a.VY.displayName;let f=e=>{let{className:t,...r}=e;return(0,n.jsx)("div",{className:(0,s.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...r})};f.displayName="DialogHeader";let g=e=>{let{className:t,...r}=e;return(0,n.jsx)("div",{className:(0,s.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};g.displayName="DialogFooter";let m=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)(a.Dx,{ref:t,className:(0,s.cn)("text-lg font-semibold leading-none tracking-tight",r),...o})});m.displayName=a.Dx.displayName;let p=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)(a.dk,{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",r),...o})});p.displayName=a.dk.displayName},84190:function(e,t,r){r.d(t,{$F:function(){return d},AW:function(){return g},Ju:function(){return v},VD:function(){return y},Xi:function(){return m},_x:function(){return f},bO:function(){return p},h_:function(){return u},qB:function(){return h}});var n=r(57437),o=r(2265),a=r(40964),i=r(76848),s=r(59559),c=r(78084),l=r(94508);let u=a.fC,d=a.xz;a.ZA,a.Uv,a.Tr;let f=a.Ee;o.forwardRef((e,t)=>{let{className:r,inset:o,children:s,...c}=e;return(0,n.jsxs)(a.fF,{ref:t,className:(0,l.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-foreground data-[state=open]:bg-foreground_alt [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",o&&"pl-8",r),...c,children:[s,(0,n.jsx)(i.Z,{className:"ml-auto"})]})}).displayName=a.fF.displayName,o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)(a.tu,{ref:t,className:(0,l.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...o})}).displayName=a.tu.displayName;let g=o.forwardRef((e,t)=>{let{className:r,sideOffset:o=4,...i}=e;return(0,n.jsx)(a.Uv,{children:(0,n.jsx)(a.VY,{ref:t,sideOffset:o,className:(0,l.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border border-foreground_alt bg-background_alt p-1 text-primary","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...i})})});g.displayName=a.VY.displayName;let m=o.forwardRef((e,t)=>{let{className:r,inset:o,...i}=e;return(0,n.jsx)(a.ck,{ref:t,className:(0,l.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-foreground_alt focus:text-primary data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",o&&"pl-8",r),...i})});m.displayName=a.ck.displayName;let p=o.forwardRef((e,t)=>{let{className:r,children:o,checked:i,...c}=e;return(0,n.jsxs)(a.oC,{ref:t,className:(0,l.cn)("relative flex cursor-pointer select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-background_alt focus:text-primary data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),checked:i,...c,children:[(0,n.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,n.jsx)(a.wU,{children:(0,n.jsx)(s.Z,{className:"h-4 w-4"})})}),o]})});p.displayName=a.oC.displayName;let h=o.forwardRef((e,t)=>{let{className:r,children:o,...i}=e;return(0,n.jsxs)(a.Rk,{ref:t,className:(0,l.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-foreground_alt focus:text-primary data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...i,children:[(0,n.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,n.jsx)(a.wU,{children:(0,n.jsx)(c.Z,{className:"h-2 w-2 fill-current"})})}),o]})});h.displayName=a.Rk.displayName;let v=o.forwardRef((e,t)=>{let{className:r,inset:o,...i}=e;return(0,n.jsx)(a.__,{ref:t,className:(0,l.cn)("px-2 py-1.5 text-sm font-semibold",o&&"pl-8",r),...i})});v.displayName=a.__.displayName;let y=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)(a.Z0,{ref:t,className:(0,l.cn)("-mx-1 my-1 h-px bg-secondary",r),...o})});y.displayName=a.Z0.displayName},95186:function(e,t,r){r.d(t,{I:function(){return i}});var n=r(57437),o=r(2265),a=r(94508);let i=o.forwardRef((e,t)=>{let{className:r,type:o,...i}=e;return(0,n.jsx)("input",{type:o,className:(0,a.cn)("flex h-9 w-full rounded-md border border-foreground_alt bg-transparent px-3 py-1 text-sm md:text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...i})});i.displayName="Input"},6512:function(e,t,r){r.d(t,{Z:function(){return s}});var n=r(57437),o=r(2265),a=r(55156),i=r(94508);let s=o.forwardRef((e,t)=>{let{className:r,orientation:o="horizontal",decorative:s=!0,...c}=e;return(0,n.jsx)(a.f,{ref:t,decorative:s,orientation:o,className:(0,i.cn)("shrink-0 bg-foreground_alt","horizontal"===o?"h-[1px] w-full":"h-full w-[1px]",r),...c})});s.displayName=a.f.displayName},93022:function(e,t,r){r.d(t,{O:function(){return a}});var n=r(57437),o=r(94508);function a(e){let{className:t,...r}=e;return(0,n.jsx)("div",{className:(0,o.cn)("animate-pulse rounded-md bg-primary/10",t),...r})}},89534:function(e,t,r){r.d(t,{FN:function(){return f},Mi:function(){return p},VW:function(){return l},_i:function(){return u},gD:function(){return g},lj:function(){return h},sA:function(){return m}});var n=r(57437),o=r(2265),a=r(79856),i=r(90535),s=r(44986),c=r(94508);let l=a.zt,u=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)(a.l_,{ref:t,className:(0,c.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 gap-1 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",r),...o})});u.displayName=a.l_.displayName;let d=(0,i.j)("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border border-secondary bg-background_alt text-primary",destructive:"group border-error bg-error/10 text-error",warning:"warning group border-warning bg-warning text-primary"}},defaultVariants:{variant:"default"}}),f=o.forwardRef((e,t)=>{let{className:r,variant:o,progress:i,...s}=e;return(0,n.jsxs)(a.fC,{ref:t,className:(0,c.cn)(d({variant:o}),"relative",r),...s,children:[void 0!==i&&(0,n.jsx)("div",{className:"absolute left-0 bottom-0 right-0 h-1 w-full bg-secondary",children:(0,n.jsx)("div",{className:"h-full bg-primary transition-all duration-150 ease-linear",style:{width:"".concat(Math.max(0,Math.min(100,i)),"%")}})}),s.children]})});f.displayName=a.fC.displayName;let g=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)(a.aU,{ref:t,className:(0,c.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",r),...o})});g.displayName=a.aU.displayName;let m=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)(a.x8,{ref:t,className:(0,c.cn)("absolute right-1 top-1 rounded-md p-1 text-primary opacity-0 transition-opacity hover:text-secondary focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",r),"toast-close":"",...o,children:(0,n.jsx)(s.Z,{className:"h-4 w-4"})})});m.displayName=a.x8.displayName;let p=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)(a.Dx,{ref:t,className:(0,c.cn)("text-sm font-semibold [&+div]:text-xs",r),...o})});p.displayName=a.Dx.displayName;let h=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)(a.dk,{ref:t,className:(0,c.cn)("text-sm opacity-90",r),...o})});h.displayName=a.dk.displayName},81103:function(e,t,r){r.d(t,{_v:function(){return u},aJ:function(){return l},pn:function(){return s},u:function(){return c}});var n=r(57437),o=r(2265),a=r(56561),i=r(94508);let s=a.zt,c=a.fC,l=a.xz,u=o.forwardRef((e,t)=>{let{className:r,sideOffset:o=4,...s}=e;return(0,n.jsx)(a.h_,{children:(0,n.jsx)(a.VY,{ref:t,sideOffset:o,className:(0,i.cn)("z-40 overflow-hidden rounded-md bg-background_alt px-3 py-1.5 text-xs text-primary animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...s})})});u.displayName=a.VY.displayName},65898:function(e,t,r){r.d(t,{pm:function(){return f}});var n=r(2265);let o=0,a=new Map,i=e=>{if(a.has(e))return;let t=setTimeout(()=>{a.delete(e),u({type:"REMOVE_TOAST",toastId:e})},1e6);a.set(e,t)},s=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1e3)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?i(r):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},c=[],l={toasts:[]};function u(e){l=s(l,e),c.forEach(e=>{e(l)})}function d(e){let{...t}=e,r=(o=(o+1)%Number.MAX_SAFE_INTEGER).toString(),n=()=>u({type:"DISMISS_TOAST",toastId:r});return u({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||n()}}}),{id:r,dismiss:n,update:e=>u({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function f(){let[e,t]=n.useState(l);return n.useEffect(()=>(c.push(t),()=>{let e=c.indexOf(t);e>-1&&c.splice(e,1)}),[e]),{...e,toast:d,dismiss:e=>u({type:"DISMISS_TOAST",toastId:e})}}},94508:function(e,t,r){r.d(t,{cn:function(){return a}});var n=r(61994),o=r(53335);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,o.m6)((0,n.W)(t))}}}]);